<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delulu Diaries - Server Test</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            text-align: center;
            max-width: 600px;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .info { color: #2196F3; }
        .warning { color: #FF9800; }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        button:hover {
            background: #45a049;
        }
        #results {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Delulu Diaries - Debug Test</h1>
        <p>This page will help you test if everything is working correctly.</p>
        
        <div id="urlCheck">
            <h3>1. Server Check</h3>
            <p id="urlStatus">Checking URL...</p>
        </div>
        
        <div id="firebaseCheck">
            <h3>2. Firebase Check</h3>
            <p id="firebaseStatus">Checking Firebase...</p>
        </div>
        
        <div id="authCheck">
            <h3>3. Authentication Check</h3>
            <p id="authStatus">Checking Auth...</p>
        </div>
        
        <div style="margin-top: 30px;">
            <button onclick="testLogin()">Test Login Page</button>
            <button onclick="testMainApp()">Test Main App</button>
        </div>
        
        <div id="results"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>
    
    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            results.appendChild(div);
            console.log(message);
        }

        // Check URL
        const currentUrl = window.location.href;
        const urlStatus = document.getElementById('urlStatus');
        
        if (currentUrl.startsWith('file://')) {
            urlStatus.innerHTML = '<span class="error">‚ùå You are opening the file directly! You need a local server.</span>';
            log('ERROR: File opened directly. Need local server.', 'error');
        } else if (currentUrl.includes('localhost') || currentUrl.includes('127.0.0.1')) {
            urlStatus.innerHTML = '<span class="success">‚úÖ Good! You are using a local server.</span>';
            log('SUCCESS: Using local server: ' + currentUrl, 'success');
        } else {
            urlStatus.innerHTML = '<span class="warning">‚ö†Ô∏è Unusual URL detected: ' + currentUrl + '</span>';
            log('WARNING: Unusual URL: ' + currentUrl, 'warning');
        }

        // Check Firebase
        const firebaseStatus = document.getElementById('firebaseStatus');
        
        setTimeout(() => {
            if (typeof firebase !== 'undefined') {
                firebaseStatus.innerHTML = '<span class="success">‚úÖ Firebase is loaded!</span>';
                log('SUCCESS: Firebase is loaded', 'success');
                
                // Check Auth
                const authStatus = document.getElementById('authStatus');
                firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                        authStatus.innerHTML = '<span class="success">‚úÖ User is logged in: ' + user.displayName + '</span>';
                        log('SUCCESS: User logged in: ' + user.displayName, 'success');
                    } else {
                        authStatus.innerHTML = '<span class="info">‚ÑπÔ∏è User is not logged in</span>';
                        log('INFO: User not logged in', 'info');
                    }
                });
            } else {
                firebaseStatus.innerHTML = '<span class="error">‚ùå Firebase failed to load!</span>';
                log('ERROR: Firebase failed to load', 'error');
            }
        }, 1000);

        function testLogin() {
            log('Testing login page...', 'info');
            window.location.href = 'login.html';
        }

        function testMainApp() {
            log('Testing main app...', 'info');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
